<!DOCTYPE html>
<html>
<head>
	<!-- <link rel="stylesheet" type="text/css" href="style.css"> -->
	<title>听写</title>
	<meta charset="utf-8"/>
</head>
<body>
	<input type="file" name="file" id="file">
	<input type="text" name="answer" id="answer">
	<button id="submit"></button>
	<div id="correct"></div>
	<div id="character"></div>

	<script>
		var input;
		var lines;
		var line = 0;

		function updateChar(string) 
		{
			document.getElementById('character').innerHTML = string;
		}

		document.getElementById('file').onchange = function() 
		{
  			var file = this.files[0];
  			var reader = new FileReader();

  			reader.onload = function(progressEvent){
				lines = this.result.split('\n');
			  	updateChar(lines[0]);
  			};
  			reader.readAsText(file);
		}

    	document.getElementById('submit').onclick = function getInput() 
    	{
			input = document.getElementById('answer').value;
			if (input == lines[line + 1]) {
				document.getElementById('correct').innerHTML = "Correct!";
			} else {
				document.getElementById('correct').innerHTML = "Incorrect!";
			}
			line=line+2;
			updateChar(lines[line]);
			console.log(line);
		}
	</script>
</body>
</html>